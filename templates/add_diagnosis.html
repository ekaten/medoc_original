{% extends "layout.html" %}

{% block title %}
    Add Diagnosis
{% endblock %}

{% block main %}

<form action="/add_diagnosis" method="POST">

    <!--SELECT PATIENT-->
    <h5 class="direcions"> Patient:</h5>

    <div class="mb-3">
        <select class="form-select mx-auto w-auto" name="patient_id" id="patient_id" required>
            <option disabled selected value="">Select a patient:</option>
            <!--List of patients-->
            {% for patient in patients %}
            <option required value="{{ patient['patient_id'] }}"> {{ patient['patient_last'] }} , {{ patient['patient_first'] }} , {{ patient["dob"]}} </option>
            {% endfor %}
        </select>
    </div>

    <h5 class="direcions"> Add a diagnosis:</h5>

    <p>* Please, add an existing condition diagnosed by you.</p>
            <table class="table table-striped provider_input">
                <tbody>
                    <tr>
                        <td>
                            <div class="mb-3">
                            <label for="condition">Condition:</label>

                            <select class="form-select mx-auto w-auto" name="condition" id="condition" required>
                                <option disabled selected value="">Condition list</option>
                                {% for condition in conditions%}
                                <option value="{{ condition['condition']}}" required> {{ condition['condition'] }} </option>
                                {% endfor %}
                                <option value=" "> Other: </option>
                            </select>

                        </div></td>

                        <td>
                            <div class="mb-3">
                                <label for="details">Diagnosis Details:</label>
                                <input class="form-control mx-auto w-auto" autocomplete="off" autofocus name="details" placeholder="Add note" type="text">
                            </div>
                        </td>

                            <!--PROVIDER'S NAME ADDED AUTOMATICALY-->
                            <td>
                                <div class="mb-3">
                                    <input hidden class="form-control mx-auto w-auto" autocomplete="off" autofocus name="who_diagnosed" type="text" value="{{provider[0]["title"]}} {{provider[0]["last"]}} ">
                                </div>
                            </td>


                            <td>
                                <label for="date_diagnosed">Date Diagnosed:</label>
                                <div class="mb-3">
                                    <input class="form-control mx-auto w-auto" type="date" name="date_diagnosed" id="date_diagnosed">
                                </div>
                            </td>


                        <td>
                            <label for="submit"> </label>
                            <div class="mb-3">
                                <input class="btn btn-primary" class="form-control mx-auto w-auto" type="submit" value="ADD">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </form>

        </div>

</form>


{% endblock %}
